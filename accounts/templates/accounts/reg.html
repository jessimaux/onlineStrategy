{% extends 'core/layout.html' %}
{% load widget_tweaks %}
{% load static %}

{% block title %}Регистрация{% endblock %}
{% block content %}
<div class="container">
<div class="auth-wrapper">
    <img class="mb-4" src="{% static 'core/img/logo.png' %}" alt="logo">
    <h5 class="mb-4 text-center">Регистрация</h5>
    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {{ form.non_field_errors }}
        </div>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <div class="form-group form-group-required">
            <label for="email">E-mail</label>
            {{ form.email|attr:"class:form-control"|attr:"required"|attr:"value" }}
            {% for error in form.email.errors %}
            <p class="my-2 alert alert-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <div class="form-group form-group-required">
            <label for="last_name">Фамилия</label>
            {{ form.last_name|attr:"class:form-control"|attr:"required"|attr:"value" }}
            {% for error in form.last_name.errors %}
            <p class="my-2 alert alert-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <div class="form-group form-group-required">
            <label for="first_name">Имя</label>
            {{ form.first_name|attr:"class:form-control"|attr:"required"|attr:"value" }}
            {% for error in form.first_name.errors %}
            <p class="my-2 alert alert-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="middle_name">Отчество</label>
            {{ form.middle_name|attr:"class:form-control"|attr:"value" }}
            {% for error in form.middle_name.errors %}
            <p class="my-2 alert alert-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <div class="form-group form-group-required">
            <label for="date_of_birth">Дата рождения</label>
            {{ form.date_of_birth|attr:"class:form-control"|attr:"type:date"|attr:"required"|attr:"value" }}
            {% for error in form.date_of_birth.errors %}
            <p class="my-2 alert alert-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <div class="form-group form-group-required">
            <label for="municipality">Муниципалитет</label>
            {{ form.municipality|attr:"class:form-select"|attr:"value" }}
            {% for error in form.municipality.errors %}
            <p class="my-2 alert alert-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <div class="form-group form-group-required">
            <label for="password">Пароль</label>
            {{ form.password1|attr:"class: mb-2 form-control"|attr:"placeholder:Введите пароль"|attr:"required"|attr:"value" }}
            <p class="help-block">Пароль должен содержать не менее 8 символов и не может состоять только из цифр.</p>
        </div>

        <div class="form-group form-group-required">
            {{ form.password2|attr:"class:form-control"|attr:"placeholder:Повторите ваш пароль"|attr:"required"|attr:"value" }}
            {% for error in form.password2.errors %}
            <p class="my-2 alert alert-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <div class="checkbox form-group form-group-required">
            <label class="control-label">
                <input type="checkbox" name="f_agree" required>Согласие на обработку персональных данных
            </label>
            <p class="help-block">Ознакомиться с полным текстом оферты вы можете здесь.</p>
        </div>

        <button class="mb-4 btn btn-primary btn-block btn-lg" type="submit">Зарегистрироваться</button>
    </form>
    <p class="auth-text">Уже зарегистрированы? <a href="{% url 'auth' %}">Выполните вход</a></p>
    <p class="auth-text">Забыли пароль? <a href="{% url 'password_reset' %}">Восстановите</a></p>
    <p class="auth-text">Возникли вопросы? <a href="mailto:online@iom48.ru">online@iom48.ru</a></p>
</div>
</div>
{% endblock %}